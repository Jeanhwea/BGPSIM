{"name":"BGP模拟器","tagline":"An BGP protocol simulator","body":"# BGP 模拟器\r\n\r\n-----------------------\r\n\r\n\r\n1 简介\r\n================\r\n\r\n这是一个简单的BGP协议的模拟器，主要参照文档\r\n[rfc1771](http://www.rfc-editor.org/rfc/rfc1771.txt \"rfc1771\")\r\n来设计和实现。\r\n\r\n2 报文格式\r\n================\r\n\r\n## 2.1 报文首部格式\r\n\r\n每个BGP报文使用相同的首部， 其它的部分随着报文类型不同而变化，首部格式如下：\r\n\r\n       0                   1                   2                   3\r\n       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\r\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\r\n       |                                                               |\r\n       +                                                               +\r\n       |                                                               |\r\n       +                                                               +\r\n       |                           Marker                              |\r\n       +                                                               +\r\n       |                                                               |\r\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\r\n       |          Length               |      Type     |\r\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\r\n\r\n## 2.2 OPEN报文格式\r\n\r\n在TCP协议建立后，第一个发出的报文就是OPEN报文，如果OPEN报文被接受方接收到，\r\n则接受方返回KEEPALIVE报文，用于确认OPEN报文发送成功。当OPEN报文发生被确认后，\r\nUPDATE报文，KEEPALIVE报文和NOTIFICATION报文将可以进行交换。\r\n\r\n除了BGP的首部，OPEN报文还应包含如下字段：\r\n\r\n       0                   1                   2                   3\r\n       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\r\n       +-+-+-+-+-+-+-+-+\r\n       |    Version    |\r\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\r\n       |     My Autonomous System      |\r\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\r\n       |           Hold Time           |\r\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\r\n       |                         BGP Identifier                        |\r\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\r\n       | Opt Parm Len  |\r\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\r\n       |                                                               |\r\n       |                       Optional Parameters                     |\r\n       |                                                               |\r\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\r\n\r\n## 2.3 UPDATE报文格式\r\n\r\nUPDATE报文是用于传递BGP对等体之间的路由信息的。这些信息可以用于构建多个自治系统\r\n之间关系图。通过应用规则来加以讨论，路由信息环路和一些其他的异常可以被检测并从自\r\n治系统间路由除去。\r\n\r\n除了BGP的首部，UPDATE报文还应包含如下字段：\r\n\r\n       +-----------------------------------------------------+\r\n       |   Unfeasible Routes Length (2 octets)               |\r\n       +-----------------------------------------------------+\r\n       |  Withdrawn Routes (variable)                        |\r\n       +-----------------------------------------------------+\r\n       |   Total Path Attribute Length (2 octets)            |\r\n       +-----------------------------------------------------+\r\n       |    Path Attributes (variable)                       |\r\n       +-----------------------------------------------------+\r\n       |   Network Layer Reachability Information (variable) |\r\n       +-----------------------------------------------------+\r\n\r\n\r\n## 2.4 KEEPALIVE报文格式\r\n\r\nBGP不以任何传输协议为基础的保活机制确保对等体可达。相反，keepalive报文 \r\n对等体之间不频繁地交换信息会引起HoldTimer过期。 KEEPALIVE报文之间合理\r\n的最大时间被置为保持时间间隔的三分之一。\r\n\r\n如果协商保持时间间隔是零，那么KEEPALIVE报文将不会被发送。\r\n\r\nKEEPALIVE报文只包括BGP首部的19个字节。\r\n\r\n\r\n## 2.5 NOTIFICATION报文格式\r\n\r\n\r\nNOTIFICATION报文用于报告连接的错误。一旦发送NOTIFICATION报文过后，\r\n就要立即断开BGP的链接。\r\n\r\n除了BGP的首部，NOTIFICATION报文还应包含如下字段：\r\n\r\n       0                   1                   2                   3\r\n       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\r\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\r\n       | Error code    | Error subcode |           Data                |\r\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +\r\n       |                                                               |\r\n       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\r\n\r\n\r\n参考资料\r\n======================\r\n\r\n[1] : http://www.rfc-editor.org/rfc/rfc1771.txt \"rfc1771\"\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}